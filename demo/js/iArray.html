<!doctype html>
<html lang="cn">
<head>
  <meta charset="UTF-8">
  <title>扩展数组</title>
  <style>pre{display: block;resize: none; border:1px solid #cecece; border-radius: 6px; padding: 20px; background: #000; color: #fff; line-height: 24px; font-size: 14px;}</style>
</head>
<body>
  扩展数组，ECMAScript5对数组新增方法有indexOf，lastIndexOf，every，some，forEach，map，filter，reduce，reduceRight等等。ie8及其以下版本是不支持的。
  <div>方法介绍</div>
  <p>1、concat</p>
  <pre>
    /**
     * [forEach 遍历数组，对数组元素执行回调方法]
     * @param  {[array]}   arr      [数组]
     * @param  {Function} callback [方法]
     * @param  {[array]}   narr      [数组]
     */
    //dfdf
    function forEach(arr,callback,narr){
      narr = !!narr.length?narr:[];
      if(Array.prototype.forEach){
        Array.prototype.forEach.call(arr,callback,narr);
      } else{
        for(var i=0,len=arr.length;i < len;i++){
          callback.call(arr,arr[i],i,narr);
        }
      }
    }
    console.log(a);
  </pre>
  <script>
    var iArray = {
      /**
       * [forEach 遍历数组，对数组元素执行回调方法]
       * @param  {[array]}   arr      [数组]
       * @param  {Function} callback [方法]
       * @param  {[array]}   narr      [数组]
       */
      forEach: function(arr,callback,narr){
        narr = !!narr.length?narr:[];
        if(Array.prototype.forEach){
          Array.prototype.forEach.call(arr,callback,narr);
        } else{
          for(var i=0,len=arr.length;i<len;i++){
            callback.call(arr,arr[i],i,narr);
          }
        }
      },
      /**
       * [indexOf 查找元素在数组中的位置，如果没有返回-1]
       * @param  {[array]} arr [数组]
       * @param  {[object]} val [查找元素]
       * @return {[int]}     [位置]
       */
      indexOf: function(arr,val){
        if(Array.prototype.indexOf){
          return Array.prototype.indexOf.call(arr,val);
        } else{
          for(var i=0,len=arr.length;i<len;i++){
            if(arr[i] === val){
              return i;
            }
          }
          return -1;
        }
      },
      /**
       * [unique 对数组元素去重，并返回新数组]
       * @param  {[array]} arr [待处理的数组]
       * @return {[array]}     [新数组]
       */
      unique: function(arr){
        var rt = [],obj = {};
        for (var i = 0, len = arr.length; i<len; i++) {
          if (!obj[arr[i]]) {
            obj[arr[i]] = 1;
            rt.push(arr[i]);
          }
        }
        return rt;
      },
      /**
       * [filter 依次对所有数组成员调用一个测试函数，返回结果为true的成员组成一个新数组返回]
       * @param  {[array]}   arr      [待处理数组]
       * @param  {Function} callback [description]
       * @return {[array]}            [新数组]
       */
      filter: function(arr,callback){
        if(Array.prototype.filter){
          return Array.prototype.filter.call(arr,callback);
        } else{
          var tmp = [];
          for(var i=0,len=arr.length;i< len;i++){
            if(callback.call(arr,arr[i])){
              tmp.push(arr[i]);
            }
          }
          return tmp;
        }
      },
      /**
       * [some 对所有元素调用一个测试函数，只要有一个元素通过该测试，就返回true，否则返回false。]
       * @param  {[array]}   arr      [待测试数组]
       * @param  {Function} callback [测试函数]
       * @return {[boolean]}            [布尔值]
       */
      some: function(arr,callback){
        if(Array.prototype.some){
          return Array.prototype.some.call(arr,callback);
        } else{
          for(var i=0,len=arr.length;i<len;i++){
            if(callback.call(arr,arr[i])){
              return true;
            }
          }
          return false;
        }
      },
      /**
       * [every 对所有元素调用一个测试函数，只有所有元素通过该测试，才返回true，否则返回false。]
       * @param  {[array]}   arr      [待测试数组]
       * @param  {Function} callback [测试函数]
       * @return {[boolean]}            [布尔值]
       */
      every:function(arr,callback){
        if(Array.prototype.every){
          return Array.prototype.every.call(arr,callback);
        } else{
          for(var i=0,len=arr.length;i<len;i++){
            if(i in arr && callback.call(arr,arr[i],i)){
              return true;
            }
          }
          return false;
        }
      }
    };

  </script>
  <script>
    function preJs(){
      var pres = document.getElementsByTagName("pre");
      for(var i=0,l=pres.length;i<l;i++){
        var tmp = pres[i].innerHTML;
        // tmp = tmp.replace(/(\/\/[^\r\n]*)|(var|function|new\s+Array\(.*\))|([^\r\n]结果\：[^\r\n]*)|(console.log\(.*\))|(\/\*.*\*\/)/igm,"<span style='color: #A8FF60;'>$1</span><span style='color: #96CBFE;'>$2</span><span style='color: #dd3300;'>$3</span><span style='color: #ff9900;'>$4</span><span style='color: #A8FF60;'>$5</span>");
        // 注释
        tmp = tmp.replace(/(\/\*[^\/]*\/|\/\/[^\r\n]*)/ig,"<span style='color: #A8FF60;'>$1</span>");

        // 函数名字
        tmp = tmp.replace(/function\s+(\w*)[^(]/ig,"function <span style='color: #ff00ff;'>$1</span>");

        // 变量名字
        tmp = tmp.replace(/[var]\s+(\w+)\s*=/ig,"var <span style='color: #ff00ff;'>$1</span> = ");
        tmp = tmp.replace(/,\s*(\w+)\s*=/ig,", <span style='color: #ff00ff;'>$1</span> =");

        // 函数
        tmp = tmp.replace(/(var|[^{function}]function|new\s+[Array|String|Date]\(.*\))/ig,"<span style='color: #96CBFE;'>$1</span>");

        // console.log
        tmp = tmp.replace(/(console.log\(.*\))|(\/\*.*\*\/)/ig,"<span style='color: #ff9900;'>$1</span>");
        // 结果：
        tmp = tmp.replace(/([^\r\n]结果\：[^\r\n]*)/ig,"<span style='color: #dd3300;'>$1</span>");
        pres[i].innerHTML = tmp;  
      }
    }
    preJs();
  </script>
</body>
</html>